<!DOCTYPE html>
<html>
<head>
	<title>Chat</title>
	<link rel="stylesheet" type="text/css" href="css/index.css">
	<link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
</head>
<body>
	<header>
		<div class="headerDiv" style="background-color: #635960"></div>
		<div class="headerDiv" style="background-color: #8b8e59"></div>
		<div class="headerDiv" style="background-color: #eada7d"></div>
		<div class="headerDiv" style="background-color: #fffecd"></div>
		<div class="headerDiv" style="background-color: #7bc3ab"></div>
		<div class="headerDiv" style="background-color: #635960"></div>
		<div class="headerDiv" style="background-color: #8b8e59"></div>
		<div class="headerDiv" style="background-color: #eada7d"></div>
		<div class="headerDiv" style="background-color: #fffecd"></div>
		<div class="headerDiv" style="background-color: #7bc3ab"></div>
	</header>
			<div id="form">
				<p id="logo">Easy chat</p>
				<p class="text">Enter your name</p>
				<input type="text" class="authorizationData" name="name" id="user_login"><br>
				<p class="text">Enter your password</p>
				<input type="password" class="authorizationData" name="pass" id="user_pass"><br>
				<div style="color: red" id="invalidPass" class="notice"></div>
				<div id="redirect" class="notice"></div>
				<button name="submit" id="submit">Send</button>
			</div>
	<script type="text/javascript">

		function get_time(){
			var date = new Date();
			var year = date.getFullYear();
			var month = date.getMonth();
			var day = date.getDate();
			var hour = date.getHours();
			var minutes = date.getMinutes();
			var seconds = date.getSeconds();
			var time = year + '/' + month + '/' + day + ' ' + hour + ':' + minutes + ':' + seconds; 
			return time; 
		}

		function logging(user_login, result) {
			var time = get_time();
			var log = time + '  ' + user_login + '  ' + result;
			console.log(log);
		}

		function redirectOrEntrance(data, user_login) {
			 $('#invalidPass').html(' ');
			 $('#redirect').html(data);
				setTimeout(function (){
					window.location.href = 'chatPage/chatPage.php?name='+user_login;
				}, 2000)
				logging(user_login ,data);
		}
		$('#submit').click(function(){
			var user_login = $('#user_login').val();
			var user_pass = $('#user_pass').val();
			$.ajax({
					method: "POST",
					url: "server.php",
					data: ({name:user_login, pass:user_pass}),
					success: function (data) {
						console.log(data);
						if(data == 'redirect'){
							redirectOrEntrance('check in...', user_login)
						}
						if(data == 'invalidPass'){
							  $('#invalidPass').text('invalid pass');
						}
						if(data == 'entrace'){
							redirectOrEntrance('entrance...', user_login);
						}
					}
			});
		});
	</script>
</body>
</html>